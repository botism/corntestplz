<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-115388644-2"></script>
    <script>
        window.dataLayer = window.dataLayer || []

        function gtag() {
            dataLayer.push(arguments)
        }

        gtag('js', new Date())
        gtag('config', 'UA-115388644-2')</script>
    <meta charset="UTF-8"/>
    <title>corn.lol - bitcoin trades and liquidations ticker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description"
          content="view large market orders and liquidations for bitcoin on bitmex, bitfinex, coinbase and binance.  watch out for arthur!"/>
    <!--    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>-->
    <!--    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>-->
    <meta name="description"
          content="view large market orders and liquidations for bitcoin on bitmex, bitfinex, coinbase and binance.  watch out for arthur!"/>
    <script src="https://unpkg.com/react@16/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
    <script src="https://unpkg.com/jquery@3.3.1/dist/jquery.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">
</head>

<body>
<div id="root">

    <div id="bbb">
        <div id="rootydiv"></div>
        <div id="rightside"></div>
    </div>
    <div id="footer"></div>
</div>

<script type="text/babel">

    /////////
    //
    // corn.lol beta v1.8
    //
    // Â© 2019 boppleton industries   All rights reserved.
    //
    /////////


    let minTradeSize = 100

    // qty of trades to keep in memory
    let under5mem = 50
    let over5under50mem = 50
    let over50under250mem = 50
    let over250mem = 50

    // default startup settings
    var bitmexMinMarket = 50000
    var bitfinexMinMarket = 5000
    var coinbaseMinMarket = 5000
    var binanceMinMarket = 25000
    var bitstampMinMarket = 5000
    var bybitMinMarket = 50000
    var deribitMinMarket = 10000


    var bitmexMinLiq = 1
    var bitmexLiqEnabled = true
    var bitmexEnabled = true
    var bitfinexEnabled = true
    var coinbaseEnabled = true
    var binanceEnabled = true


    var bitstampEnabled = true
    var bybitEnabled = true
    var deribitEnabled = true

    // for font/colors change
    var bitmexSize1 = 1
    var bitmexSize2 = 2000
    var bitmexSize3 = 10000
    var bitmexSize4 = 100000
    var bitmexSize5 = 500000
    var bitmexSize6 = 1000000
    var bitfinexSize1 = 1
    var bitfinexSize2 = 1000
    var bitfinexSize3 = 10000
    var bitfinexSize4 = 50000
    var bitfinexSize5 = 300000
    var bitfinexSize6 = 500000

    var trades = null
    var liquidations = null

    var hoverable = true

    var sound = false

    var currentPrice = 0


    const beep = (size) => {
        // playSound("sine",30, 0.2, 432, 0.2, 1440, 0.1)
        playSound("sine", Math.abs(size) / 100)
    }


    const setCookie = (cookieKey, cookieValue, expirationDays) => {
        let expiryDate = ''

        if (expirationDays) {
            const date = new Date()

            date.setUTCFullYear(2052)

            expiryDate = `; expiryDate=" ${date.toUTCString()}`
        }

        document.cookie = cookieKey + "=" + cookieValue + "; expires=Thu, 25 Dec 2052 12:00:00 UTC; path=/"

        // document.cookie = `${cookieKey}=${cookieValue || ''}${expiryDate}; path=/`;


    }

    const getCookie = (cookieKey) => {
        let cookieName = `${cookieKey}=`

        let cookieArray = document.cookie.split(';')

        for (let cookie of cookieArray) {

            while (cookie.charAt(0) == ' ') {
                cookie = cookie.substring(1, cookie.length)
            }

            if (cookie.indexOf(cookieName) == 0) {
                return cookie.substring(cookieName.length, cookie.length)
            }
        }
    }



    class Start extends React.Component {
        constructor(props) {

            super(props)
            this.state = {marketdata: [], liqdata: []}
            this.instance = this

            let c = this.instance

            // console.log("start constructor")

            // console.log("return: " + getCookie('return'))

            if (getCookie('return')) {
                this.state.return = true
            } else {
                this.state.return = false
                setCookie('return', true, 300)
            }


            Start.textMessage("trades")
            Start.liquidationTextMessage("liquidations")

            setInterval(this.clearBigTradesLoop, 1000)
            setInterval(this.setTitleLoop, 2000)

            this.bitmexWebSocketClient(c)
            this.bitfinexWebSocketClient(c)
            this.setupCoinbaseWebsocketClient(c)
            this.binanceWebSocketClient(c)
            this.bitstampWebsocketClient(c)
            this.bybitWebsocketClient(c)

            this.deribitWebsocketClient(c)

            this.setupSettings()
            this.scrollUpLoop()


            setInterval(this.setStreamDataLoop, 500, c)


            // sound = document.getElementById("audio")

        }


        setStreamData(data) {
            this.setState(data)
        }

        setStreamDataLoop(c) {

            c.setStreamData({marketdata: trades, liqdata: liquidations})


        }

        // removes trades over max for each size grouping
        clearBigTradesLoop() {
            let under5count = 0
            let over5under50count = 0
            let over50under250count = 0
            let over250count = 0

            for (let i = trades.length - 1; i > 1; i--) {

                let tradeSize = Math.abs(trades[i].size)

                if (tradeSize < 5000) {
                    under5count++
                } else if (tradeSize < 50000) {
                    over5under50count++
                } else if (tradeSize < 250000) {
                    over50under250count++
                } else if (tradeSize > 250000) {
                    over250count++
                }
            }

            // console.log("trade count; under 5k: " + under5count + " over 5 under 50: " + over5under50count + " over50 under 250: " + over50under250count + " over 250: " + over250count)

            function deleteTrades(count, keep, lessThan, greaterThan) {
                let deleteQty = count - keep
                for (let i = trades.length - 1; i > 1; i--) {
                    if (trades !== null) {
                        if (trades[i] !== null && Math.abs(trades[i].size) <= lessThan && Math.abs(trades[i].size) >= greaterThan) {
                            if (i > keep) {
                                trades.splice(i, 1)
                                deleteQty--
                            }

                        }
                        if (deleteQty <= 0) {
                            return
                        }
                    }
                }
            }

            if (under5count > under5mem) {
                deleteTrades(under5count, under5mem, 5000, 0)
            }
            if (over5under50count > over5under50mem) {
                deleteTrades(over5under50count, over5under50mem, 50000, 5000)
            }
            if (over50under250count > over50under250mem) {
                deleteTrades(over50under250count, over50under250mem, 250000, 50000)
            }
            if (over250count > over250mem) {
                deleteTrades(over250count, over250mem, 100000000, 250000)
            }

            function deleteLiqs(count, keep, lessThan, greaterThan) {
                let deleteQty = count - keep
                for (let i = liquidations.length - 1; i > 1; i--) {
                    if (liquidations !== null) {
                        if (liquidations[i] !== null && Math.abs(liquidations[i].highestAmount) <= lessThan && Math.abs(liquidations[i].highestAmount) >= greaterThan) {
                            if (i > keep) {
                                liquidations.splice(i, 1)
                                deleteQty--
                            }

                        }
                        if (deleteQty <= 0) {
                            return
                        }
                    }
                }
            }

            let under100kcount = 0
            let over100kcount = 0

            for (let i = liquidations.length - 1; i > 1; i--) {

                let tradeSize = Math.abs(liquidations[i].highestAmount)

                if (tradeSize < 100000) {
                    under100kcount++
                } else {
                    over100kcount++
                }
            }

            // console.log("liqs under100k: " + under100kcount + " over: " + over100kcount)

            if (under100kcount >= 100) {
                deleteLiqs(under100kcount, 50, 100000, 0)
            }
            if (over100kcount >= 100) {
                deleteLiqs(over100kcount, 50, 100000000, 100000)
            }
        }


        bitmexWebSocketClient(c) {
            // console.log("bitmexwsfunction()")
            var socket

            // let tones =

            const socketMessageListener = (event) => {

                // playSound()

                // console.log("mex msg: " + JSON.stringify(event.data) )

                // console.log("mex message, enabled: " + bitmexEnabled)

                if (bitmexEnabled) {
                    let tradeRaw = JSON.parse(event.data)
                    if (tradeRaw.data == null) {
                        return
                    }

                    if (tradeRaw.table === "trade") {
                        let trade = Start.bitmexTrade(tradeRaw.data)
                        if (trade[0].size >= bitmexMinMarket) {
                            if (trades == null) {
                                trades = trade
                            } else {
                                trades = trade.concat(trades)

                                // this.beep(trade[0].size)

                                this.tradeBeep(trade[0])

                                // if (trade[0].size<100000) {
                                //     return
                                // }


                                // playTone(['A','B','C','D','E','F'][trade[0].size>5000000?5:trade[0].size>1000000?4:trade[0].size>5000000?3:trade[0].size>100000?2:trade[0].size>10000?1:0]);
                            }
                            // c.setStreamData({data: trades})
                        }
                    } else if (tradeRaw.table === "liquidation") {
                        for (let i = 0; i < tradeRaw.data.length; i++) {

                            // console.log("\n\nliq message " + tradeRaw.action + JSON.stringify(tradeRaw.data[i]))

                            let liq = Start.bitmexLiq(tradeRaw.data[i], tradeRaw.action)

                            // console.log("size: " + liq.size + " highestsize: " + liq.highestAmount)

                            if (liq.action === "insert") {
                                if (liquidations == null) {
                                    liquidations = liq
                                } else {
                                    liquidations = liq.concat(liquidations)

                                    this.tradeBeep(liq[0])

                                }
                            } else if (liq.action === "update") {
                                for (let i = 0; i < liquidations.length; i++) {
                                    if (liquidations[i].id === liq.id) {
                                        if (liq.size !== 0 && !isNaN(liq.size)) {
                                            liquidations[i].size = liq.size
                                        }
                                        if (!isNaN(liq.size) && liq.size > liquidations[i].highestAmount) {
                                            liquidations[i].highestAmount = liq.size
                                        }
                                        if (liq.price > 0 && !isNaN(liq.price)) {
                                            liquidations[i].price = liq.price
                                        }

                                        // console.log(liquidations[i].id + " updated, newsize: " + liquidations[i].size + " highestsize: " + liquidations[i].highestAmount)

                                        // if (liquidations[i].highestAmount > 1000000) {
                                        //
                                        //     let liqToTop = [liquidations[i]]
                                        //     console.log("moving liq to top: " + JSON.stringify(liqToTop))
                                        //     liquidations = liquidations.splice(i, 1)
                                        //     liquidations = liqToTop.concat(liquidations)
                                        //
                                        //     console.log("new liquidations: " + JSON.stringify(liquidations))
                                        // }
                                    }
                                }
                            } else if (liq.action === "delete") {
                                for (let i = 0; i < liquidations.length; i++) {
                                    if (liquidations[i].id === liq.id) {
                                        liquidations[i].deleted = true
                                        liquidations[i].size = 0
                                        liquidations[i].endTime = Date.now()
                                    }
                                }
                            }

                        }

                    }
                }
            }


            const socketOpenListener = (event) => {
                console.log('mex open')
                socket.send("{\"op\": \"" + "subscribe\", \"args\": [\"" + "liquidation" + ":" + "XBTUSD" + "\"]}")
            }
            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('mex close')
                }
                socket = new WebSocket('wss://www.bitmex.com/realtime?subscribe=trade:XBTUSD')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }

            setTimeout(function () {
                socketCloseListener()
            }, 3000)

        }

        tradeBeep(trade) {


            return

            let size = Math.abs(trade.size)

            if (size<20000 || sound===false||sound==='false') {
                return
            }

            let tone

            if (trade.side) {
                tone = size<100000?'C'
                    :size<200000?'D#'
                        :size<500000?'E#'
                            :size<1000000?'F#'
                                :size<5000000?'G#':'Gm'
            } else {
                tone = size<100000?'B3'
                    :size<200000?'C3'
                        :size<500000?'D3'
                            :size<1000000?'E2'
                                :size<5000000?'F2':'F2'
            }


            let len = size<100000?0.5
                :size<200000?0.8
                    :size<500000?1.2
                        :size<1000000?1.5
                            :size<5000000?1.7:3


            playTone(tone, 'sine', len)

            if (!trade.side) {
                // setTimeout(()=>{playTone(tone, 'sine', len)},50)
                setTimeout(()=>{playTone(tone, 'sine', len)},80)
            }
        }


        static bitmexLiq(liqraw, action) {
            let liq = []

            liq.push({
                exchangeName: "bitmex",
                id: liqraw.orderID,
                action: action,
                side: liqraw.side === "Buy",
                price: liqraw.price,
                firstPrice: liqraw.price,
                size: parseFloat(liqraw.leavesQty).toFixed(0),
                update: "",
                liq: true,
                startSize: parseFloat(liqraw.leavesQty).toFixed(0),
                highestAmount: parseFloat(liqraw.leavesQty).toFixed(0),
                deleted: false,
                startTime: Date.now()
            })

            liq.exchangeName = "bitmex"
            liq.id = liqraw.orderID
            liq.action = action
            liq.side = liqraw.side === "Buy"
            liq.price = liqraw.price
            liq.firstPrice = liqraw.price
            liq.size = parseFloat(liqraw.leavesQty).toFixed(0)
            liq.update = ""
            liq.liq = true
            liq.startSize = parseFloat(liqraw.leavesQty).toFixed(0)
            liq.highestAmount = parseFloat(liqraw.leavesQty).toFixed(0)
            liq.deleted = false
            liq.startTime = Date.now()


            return liq

        }

        static bitmexTrade(tradeRaw) {
            let trade = []
            let totalSize = 0
            for (let i = 0; i < tradeRaw.length; i++) {
                totalSize += tradeRaw[i].size
            }

            let firstPrice = tradeRaw[0].price
            let lastPrice = tradeRaw[tradeRaw.length - 1].price

            if (tradeRaw[tradeRaw.length - 1].price !== currentPrice) {
                currentPrice = tradeRaw[tradeRaw.length - 1].price
            }


            trade.push({
                symbol: "XBTUSD",
                price: lastPrice,
                timestamp: tradeRaw[0].timestamp,
                side: tradeRaw[0].side === "Buy", //bitmex
                exchangeName: "bitmex",
                startTime: Date.now(),
                firstPrice: firstPrice,
                lastPrice: lastPrice,
                size: totalSize
            })
            return trade
        }

        static textMessage(s) {
            let trade = []
            trade.push({
                symbol: "message",
                price: 5000,
                size: 1,
                timestamp: Date.now,
                side: true,
                exchangeName: "message",
                startTime: Date.now,
                btcAmt: 0,
                firstPrice: 5000,
                lastPrice: 5000,
                message: s
            })
            trade.price = 5000
            trade.size = 1
            trade.timestamp = Date.now
            trade.side = true
            trade.exchangeName = "message"
            trade.startTime = Date.now
            trade.btcAmt = 0
            trade.firstPrice = 5000
            trade.lastPrice = 5000
            this.message = s


            if (trades == null) {
                trades = trade
            } else {
                trades = trade.concat(trades)
            }

        }

        static liquidationTextMessage(s) {
            let message = []
            message.push({
                symbol: "message",
                price: 5000,
                size: 1,
                timestamp: Date.now,
                side: true,
                exchangeName: "message",
                startTime: Date.now,
                btcAmt: 0,
                firstPrice: 5000,
                lastPrice: 5000,
                message: s,
                type: "liquidation"
            })
            message.price = 5000
            message.size = 1
            message.timestamp = Date.now
            message.side = true
            message.exchangeName = "message"
            message.startTime = Date.now
            message.btcAmt = 0
            message.firstPrice = 5000
            message.lastPrice = 5000
            this.message = s


            if (liquidations == null) {
                liquidations = message
            } else {
                liquidations = message.concat(liquidations)
            }
        }

        bitfinexWebSocketClient(c) {
            var socket
            const socketMessageListener = (event) => {

                // console.log("finex msg -- " + bitfinexEnabled)

                if (bitfinexEnabled) {
                    let trade = JSON.parse(event.data)
                    if (trade == null || trade[1] !== "te") {
                        return
                    }
                    let trade2 = Start.bitfinexTrade(trade)
                    if (trades[0] != null && trades[0].timestamp === trade2[0].timestamp && trades[0].side === trade2[0].side) {
                        trades[0].btcAmt += trade2[0].btcAmt
                        trades[0].size += trade2[0].size
                        trades[0].lastPrice = trade2[0].price
                        this.tradeBeep(trade2[0])
                    } else if (trade2[0].size >= bitfinexMinMarket) {
                        if (trades == null) {
                            trades = trade2
                        } else {
                            trades = trade2.concat(trades)
                            this.tradeBeep(trade2[0])

                        }
                    }
                    // c.setStreamData({data: trades})
                }
            }

            const socketOpenListener = (event) => {
                console.log('finex open')
                socket.send("{\n" +
                    "  \"event\": \"subscribe\",\n" +
                    "  \"channel\": \"trades\",\n" +
                    "  \"pair\": \"BTCUSD\"\n" +
                    "}")
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('finex close')
                }
                socket = new WebSocket('wss://api.bitfinex.com/ws')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }
            socketCloseListener()
        }

        static bitfinexTrade(tradeRaw) {
            let trade = []
            trade.push({
                symbol: "BTCUSD",
                price: tradeRaw[4],
                size: Math.abs(parseInt(tradeRaw[5] * tradeRaw[4])),
                timestamp: tradeRaw[3],
                side: tradeRaw[5] > 0,
                exchangeName: "bitfinex",
                startTime: Date.now(),
                btcAmt: tradeRaw[5],
                firstPrice: tradeRaw[4],
                lastPrice: tradeRaw[4]
            })
            return trade
        }


        bitstampWebsocketClient(c) {

            var socket
            const socketMessageListener = (event) => {

                if (!bitstampEnabled) {
                    return
                }

                // if (bitfinexEnabled) {
                let trade = JSON.parse(event.data)

                //
                if (trade == null || trade.event !== "trade") {
                    return
                }


                let trade2 = Start.bitstampTrade(trade.data)

                if (trades[0] != null && trades[0].timestamp === trade2[0].timestamp && trades[0].side === trade2[0].side) {


                    trades[0].btcAmt += trade2[0].btcAmt
                    trades[0].size += trade2[0].size
                    trades[0].lastPrice = trade2[0].price
                    this.tradeBeep(trade2[0])
                } else if (trade2[0].size >= bitstampMinMarket) {
                    if (trades == null) {
                        trades = trade2

                    } else {
                        trades = trade2.concat(trades)
                        // console.log("adding trade " + JSON.stringify(trade2))

                        this.tradeBeep(trade2[0])

                    }
                }
                // c.setStreamData({data: trades})
            }


            const socketOpenListener = (event) => {
                console.log('stamp open')
                socket.send("{\n" +
                    "    \"event\": \"bts:subscribe\",\n" +
                    "    \"data\": {\n" +
                    "        \"channel\": \"live_trades_btcusd\"\n" +
                    "    }\n" +
                    "}")
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('stamp close')
                }
                socket = new WebSocket('wss://ws.bitstamp.net')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }
            socketCloseListener()

        }

        static bitstampTrade(tradeRaw) {

            // console.log(tradeRaw)

            let trade = []
            trade.push({
                symbol: "BTCUSD",
                price: tradeRaw.price,
                size: Math.abs(tradeRaw.amount * tradeRaw.price),
                timestamp: tradeRaw.timestamp,
                side: tradeRaw.type === 0,
                exchangeName: "bitstamp",
                startTime: Date.now(),
                btcAmt: tradeRaw.amount,
                firstPrice: tradeRaw.price,
                lastPrice: tradeRaw.price
            })
            return trade
        }

        bybitWebsocketClient(c) {

            var socket
            const socketMessageListener = (event) => {

                if (!bybitEnabled) {
                    return
                }


                // if (bitfinexEnabled) {
                let trade = JSON.parse(event.data)

                // console.log("bbiut trade: " + JSON.stringify(trade))

                //
                if (trade === null) {
                    return
                }


                let trade2 = Start.bybitTrade(trade.data[0])

                // console.log('size:' + trade2[0].size  + " min: " +  bybitMinMarket)

                if (trades[0] != null && trades[0].timestamp === trade2[0].timestamp && trades[0].side === trade2[0].side) {

                    // trades[0].btcAmt += trade2[0].btcAmt
                    trades[0].size += trade2[0].size
                    trades[0].lastPrice = trade2[0].price
                    this.tradeBeep(trade2[0])
                } else if (trade2[0].size >= bybitMinMarket) {
                    if (trades == null) {
                        trades = trade2

                    } else {
                        trades = trade2.concat(trades)
                        // console.log("adding trade " + JSON.stringify(trade2))

                        this.tradeBeep(trade2[0])

                    }
                }
                // c.setStreamData({data: trades})
            }


            const socketOpenListener = (event) => {
                console.log('bybit open')
                socket.send('{"op":"subscribe","args":["trade.BTCUSD"]}')
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('bybit close')
                }
                socket = new WebSocket('wss://stream.bybit.com/realtime')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }
            socketCloseListener()

        }

        static bybitTrade(tradeRaw) {

            // console.log(tradeRaw)

            let trade = []
            trade.push({
                symbol: "BTCUSD",
                price: tradeRaw.price,
                size: tradeRaw.size,
                timestamp: tradeRaw.timestamp,
                side: tradeRaw.side === 'Buy',
                exchangeName: "bybit",
                startTime: Date.now(),
                btcAmt: 0,
                firstPrice: tradeRaw.price,
                lastPrice: tradeRaw.price
            })
            return trade
        }

        deribitWebsocketClient(c) {

            var socket
            const socketMessageListener = (event) => {

                if (!deribitEnabled) {
                    return
                }
                let trade = JSON.parse(event.data)

                // console.log("deribit trade: " + JSON.stringify(trade))

                //
                if (trade === null) {
                    return
                }

                let trade2 = Start.deribitTrade(trade.params.data)

                // console.log('size:' + trade2[0].size  + " min: " +  deribitMinMarket)

                if (trade2[0].size >= deribitMinMarket) {
                    if (trades == null) {
                        trades = trade
                    } else {
                        trades = trade2.concat(trades)


                        this.tradeBeep(trade2[0])
                    }
                }
                c.setStreamData({data: trades})
            }


            const socketOpenListener = (event) => {
                console.log('deribit open')

                let open = {
                    "jsonrpc": "2.0",
                    "id": 1785,
                    "method": "public/subscribe",
                    "params": {
                        "channels": [
                            "trades.BTC-PERPETUAL.raw"
                        ]
                    }
                }

                socket.send(JSON.stringify(open))
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('deribit close')
                }
                socket = new WebSocket('wss://www.deribit.com/ws/api/v2')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }
            socketCloseListener()

        }

        static deribitTrade(tradeRaw) {
            let trade = []
            let totalSize = 0
            for (let i = 0; i < tradeRaw.length; i++) {
                totalSize += tradeRaw[i].amount
            }

            let firstPrice = tradeRaw[0].price
            let lastPrice = tradeRaw[tradeRaw.length - 1].price

            if (tradeRaw[tradeRaw.length - 1].price !== currentPrice) {
                currentPrice = tradeRaw[tradeRaw.length - 1].price
            }


            trade.push({
                symbol: "BTCUSD",
                price: lastPrice,
                timestamp: tradeRaw[0].timestamp,
                side: tradeRaw[0].direction === "buy",
                exchangeName: "deribit",
                startTime: Date.now(),
                firstPrice: firstPrice,
                lastPrice: lastPrice,
                size: totalSize
            })
            return trade
        }


        okexWebSocketClient(c) {

            console.log("okex start")

            var socket


            const socketMessageListener = (event) => {
                if (true) {//todo: okexenabled
                    // let trade = JSON.parse(event)

                    var msg = pako.inflate(event)

                    console.log("msg: " + msg)

                    // console.log("okex trade " + JSON.stringify(event.event))


                    // if (trade == null || trade[1] !== "te") {return}
                    // let trade2 = Start.bitfinexTrade(trade)
                    // if (trades[0] != null && trades[0].timestamp === trade2[0].timestamp && trades[0].side === trade2[0].side) {
                    //     trades[0].btcAmt += trade2[0].btcAmt
                    //     trades[0].size += trade2[0].size
                    //     trades[0].lastPrice = trade2[0].price
                    // } else if (trade2[0].size >= bitfinexMinMarket){
                    //     if (trades == null) {
                    //         trades = trade2
                    //     } else {
                    //         trades = trade2.concat(trades)}
                    // }
                    // c.setStreamData({data: trades})
                }
            }

            const socketOpenListener = (event) => {
                console.log('okex open')
                socket.send("{\"op\": \"subscribe\", \"args\": [\"swap/trade:BTC-USD-SWAP\"]}")
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('okex close')
                }
                socket = new WebSocket('wss://real.okex.com:10442/ws/v3')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }
            socketCloseListener()
        }

        static okexTrade(tradeRaw) {
            // let trade = []
            // trade.push({
            //     symbol: "BTCUSD",
            //     price: tradeRaw[4],
            //     size: Math.abs(parseInt(tradeRaw[5] * tradeRaw[4])),
            //     timestamp: tradeRaw[3],
            //     side: tradeRaw[5] > 0,
            //     exchangeName: "bitfinex",
            //     startTime: Date.now(),
            //     btcAmt: tradeRaw[5],
            //     firstPrice: tradeRaw[4],
            //     lastPrice: tradeRaw[4]
            // })
            // return trade
        }


        setupCoinbaseWebsocketClient(c) {
            var socket
            const socketMessageListener = (event) => {
                if (coinbaseEnabled) {
                    let tradeRaw = JSON.parse(event.data)
                    if (tradeRaw == null || tradeRaw.type !== "match") {
                        return
                    }

                    if (!coinbaseEnabled) {
                        return
                    }

                    let trade = Start.coinbaseTrade(tradeRaw)

                    // console.log("trade: " + JSON.stringify(trade))

                    // console.log("trade size: " + trade.size)

                    if (trades[0] != null && trades[0].timestamp === trade.timestamp && trades[0].side === (trade.side === "sell")) {

                        trades[0].btcAmt = parseFloat(trades[0].btcAmt) + parseFloat(trade.btcAmt)
                        trades[0].size = parseFloat(trades[0].size) + parseFloat(trade.size)
                        trades[0].lastPrice = parseFloat(trade.price)
                        this.tradeBeep(trade[0])
                    } else if (parseFloat(trade[0].size) >= coinbaseMinMarket) {

                        if ((parseFloat(trade[0].size) > 500000 && Math.abs(parseFloat(trade.btcAmt)) < 30)) {
                        } else if (trades == null) {
                            trades = trade
                        } else {
                            trades = trade.concat(trades)

                            this.tradeBeep(trade[0])

                        }
                    }
                    // c.setStreamData({data: trades})
                }
            }

            const socketOpenListener = (event) => {
                console.log('cb open')
                socket.send("{\"type\": \"subscribe\", \"product_ids\": [\"BTC-USD\"],\"channels\": [\"matches\"]}")
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('cb close')
                }
                socket = new WebSocket('wss://ws-feed.pro.coinbase.com')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }
            socketCloseListener()
        }

        static coinbaseTrade(tradeRaw) {
            let size = parseFloat(tradeRaw.size) * parseFloat(tradeRaw.price)

            var hide = false
            if (size > 1000000) {
                console.log("binance over 1mil, printing " + JSON.stringify(traderaw))
                hide = true
            }

            let time = Date.parse(tradeRaw.time)
            let trade = []
            trade.push({
                symbol: "BTCUSD",
                price: parseFloat(tradeRaw.price).toFixed(1),
                size: Math.abs(size).toFixed(0),
                side: tradeRaw.side === "sell",
                hide: hide,
                timestamp: time,
                exchangeName: "coinbase",
                startTime: Date.now(),
                btcAmt: tradeRaw.size,
                firstPrice: parseFloat(tradeRaw.price).toFixed(1),
                lastPrice: parseFloat(tradeRaw.price).toFixed(1)
            })

            trade.btcAmt = parseFloat(tradeRaw.size).toFixed(1)
            trade.hide = hide
            trade.timestamp = time
            trade.size = Math.abs(size).toFixed(0)
            trade.side = tradeRaw.side === "sell"
            trade.price = parseFloat(tradeRaw.price)
            trade.firstPrice = parseFloat(tradeRaw.price).toFixed(1)
            trade.lastPrice = parseFloat(tradeRaw.price).toFixed(1)
            return trade
        }

        binanceWebSocketClient(c) {
            var socket
            const socketMessageListener = (event) => {
                if (binanceEnabled) {
                    let trade = JSON.parse(event.data)
                    if (trade == null || trade.e !== "aggTrade") {
                        return
                    }
                    let trade2 = Start.binanceTrade(trade)
                    if (trades[0] != null && trades[0].timestamp === trade2.timestamp && trades[0].side === trade2.side) {
                        trades[0].btcAmt = parseFloat(trades[0].btcAmt) + parseFloat(trade2.btcAmt)
                        trades[0].size = trades[0].size + trade2.size
                        trades[0].lastPrice = trade2.price
                        this.tradeBeep(trade2[0])

                    } else if (trade2[0].size >= binanceMinMarket) {
                        if (trades == null) {
                            trades = trade
                        } else {
                            trades = trade2.concat(trades)

                            this.tradeBeep(trade2[0])

                        }
                    }

                    // c.setStreamData({data: trades})
                }
            }

            const socketOpenListener = (event) => {
                console.log('binance open')
            }

            const socketCloseListener = (event) => {
                if (socket) {
                    console.error('binance close')
                }
                socket = new WebSocket('wss://stream.binance.com:9443/ws/btcusdt@aggTrade')
                socket.addEventListener('open', socketOpenListener)
                socket.addEventListener('message', socketMessageListener)
                socket.addEventListener('close', socketCloseListener)
            }

            socketCloseListener()
        }

        static binanceTrade(tradeRaw) {
            let pr = parseFloat(tradeRaw.p)
            let btcSize = parseFloat(tradeRaw.q)
            let totalSize = btcSize * pr

            let trade = []
            trade.push({
                symbol: "BTCUSDT",
                price: pr,
                size: Math.abs(totalSize),
                timestamp: tradeRaw.T,
                side: !tradeRaw.m,
                exchangeName: "binance",
                startTime: Date.now(),
                btcAmt: btcSize.toFixed(1),
                firstPrice: pr,
                lastPrice: pr
            })
            trade.price = pr
            trade.size = Math.abs(totalSize)
            trade.timestamp = tradeRaw.T
            trade.side = !tradeRaw.m
            trade.exchangeName = "binance"
            trade.startTime = Date.now()
            trade.btcAmt = btcSize.toFixed(1)
            trade.firstPrice = pr
            trade.lastPrice = pr

            return trade
        }


        render() {

            let hello = (
                <div id="initialTextDiv">
                    <h2>welcome to corn.lol</h2>
                    <span>bitcoin market orders are shown with their total USD trade value.  use the settings (in bottom toolbar) to adjust mimimum amounts for each exchange.  have fun! </span>
                </div>
            )

            return (
                <div id="rootydiv" className="rootydiv">
                    <div id="tableandbottom" className="drag">
                        <div id="maintablediv">
                            <div>
                                <Table data={this.state.marketdata}/>
                            </div>

                            {this.state.return ? '' : hello}

                        </div>
                        <div id="hiddendiv">
                            <div className="singleSettingsDiv">
                                <a id="settingslink" href="javascript:void(0)"><img
                                    src="https://i.imgur.com/6AoPcNm.png" height="30"
                                    width="30"/></a>
                                <span id="settingsButtonText">settings</span>
                            </div>

                            <span id="pad1"> <hr/> </span>

                            <div className="singleSettingsDiv">

                                <a id="clearlink" href="javascript:void(0)"><img src="https://i.imgur.com/NkTQRNj.png"
                                                                                 height="30"
                                                                                 width="30"/></a>
                                <span id="settingsButtonText">clear</span>
                            </div>

                            <span id="pad1"> <hr/> </span>

                            <div className="singleSettingsDiv">

                                <a id="markethidelink" href="javascript:void(0)"><img src="img/closearrow.png"
                                                                                      height="30"
                                                                                      width="30"/></a>
                                <span id="settingsButtonText">close</span>
                            </div>
                        </div>
                    </div>
                    <div id="liqMainDiv">
                        <div id="liqdiv">
                            <LiqTable data={this.state.liqdata}/>
                        </div>

                        <div id="hiddendivLiq">
                            <div className="singleSettingsDiv">
                                <a id="liqsettingslink" href="javascript:void(0)"><img
                                    src="https://i.imgur.com/6AoPcNm.png" height="30"
                                    width="30"/></a>
                                <span id="settingsButtonText">settings</span>
                            </div>

                            <span id="pad1"> <hr/> </span>

                            <div className="singleSettingsDiv">

                                <a id="liqclearlink" href="javascript:void(0)"><img
                                    src="https://i.imgur.com/NkTQRNj.png" height="30"
                                    width="30"/></a>
                                <span id="settingsButtonText">clear</span>
                            </div>

                            <span id="pad1"> <hr/> </span>

                            <div className="singleSettingsDiv">

                                <a id="liqhidelink" href="javascript:void(0)"><img src="img/closearrow.png" height="30"
                                                                                   width="30"/></a>
                                <span id="settingsButtonText">close</span>
                            </div>
                        </div>

                    </div>
                </div>

            )
        }

        setupSettings() {
            window.onload = function () {


                // new TradingView.widget(
                //     {
                //         "autosize": true,
                //         "symbol": "BITMEX:XBTUSD",
                //         "interval": "15",
                //         "timezone": "Etc/UTC",
                //         "theme": "Dark",
                //         "style": "1",
                //         "locale": "en",
                //         "toolbar_bg": "#f1f3f6",
                //         "enable_publishing": false,
                //         "hide_legend": true,
                //         "hide_side_toolbar": false,
                //         "allow_symbol_change": true,
                //         "referral_id": "a",
                //         "container_id": "tradingview_1a86e"
                //     }
                // );


                let donateText = document.getElementById("donateText")

                donateText.onclick = function () {

                    var win = window.open("https://corn.lol/eth", '_blank')
                    win.focus()

                }

                // let donate2Text = document.getElementById("donateText2")
                //
                // donate2Text.onclick = function () {
                //
                //     window.alert("BTC: 14mzYBZZyMQGP7ksCS2YPSpnV6uMNgfKtU")
                //
                // }

                let bitmexLiqMinAmountField = document.getElementById("bitmexLiqMinField")
                bitmexLiqMinAmountField.value = bitmexMinLiq

                bitmexLiqMinAmountField.onchange = function () {
                    bitmexMinLiq = bitmexLiqMinAmountField.value
                    setCookie("bitmexLiqMin", bitmexMinLiq, 300)
                }

                let bitmexLiqEnabledButton = document.getElementById("bitmexLiqEnabledButton")
                bitmexLiqEnabledButton.checked = getCookie("bitmexLiqEnabled") === undefined ? true : getCookie("bitmexLiqEnabled")

                bitmexLiqEnabledButton.onclick = function () {
                    bitmexLiqEnabled = !bitmexLiqEnabled
                    document.getElementById("bitmexLiqMinField").disabled = !document.getElementById("bitmexLiqMinField").disabled

                    setCookie("bitmexLiqEnabled", bitmexLiqEnabledButton.checked, 300)
                }


                // document.getElementById("bitmexLiqMinField").disabled = true


                let liqEnabledButton = document.getElementById("liqEnabledButton")
                liqEnabledButton.checked = true

                liqEnabledButton.onclick = function () {
                    let liqMainDiv = document.getElementById("liqMainDiv")
                    liqMainDiv.style.display = liqMainDiv.style.display !== "none" ? "none" : "flex"
                    // document.getElementById("bitmexLiqMinField").disabled = !document.getElementById("bitmexLiqMinField").disabled
                    bitmexLiqEnabledButton.disabled = !bitmexLiqEnabledButton.disabled

                    if (liqEnabledButton.disabled && bitmexLiqEnabledButton.disabled) {
                        document.getElementById("bitmexLiqMinField").disabled = true
                    } else if (!liqEnabledButton.disabled && bitmexLiqEnabledButton.disabled) {
                        document.getElementById("bitmexLiqMinField").disabled = true
                    } else if (!liqEnabledButton.disabled && bitmexLiqEnabledButton.checked) {
                        document.getElementById("bitmexLiqMinField").disabled = false
                    }

                }

                let marketsEnabledButton = document.getElementById("marketsEnabledButton")
                marketsEnabledButton.checked = true

                marketsEnabledButton.onclick = function () {
                    let tableandbottom = document.getElementById("tableandbottom")
                    tableandbottom.style.display = tableandbottom.style.display === "none" ? "flex" : "none"
                }


                let hoverEnabledbutton = document.getElementById("hoverEnabledButton")

                // hoverEnabledbutton.checked = true

                hoverEnabledbutton.onclick = function () {

                    console.log('hov was ' + hoverable)

                    hoverable = hoverEnabledbutton.checked
                    document.getElementById("tableandbottom").style.pointerEvents = hoverable===true||hoverable==='true' ? "all" : "none"
                    document.getElementById("liqMainDiv").style.pointerEvents = hoverable===true||hoverable==='true' ? "all" : "none"

                    setCookie("hoverable", hoverable, 300)

                    console.log("hover now " + getCookie("hoverable"))

                }






                let pepeIcon = document.getElementById("pepeIcon")

                let rotation = 20

                pepeIcon.onclick = function () {
                    pepeIcon.style.transform = "rotate(" + rotation + "deg)"
                    rotation += 20

                    if (rotation > 360) {
                        rotation = 0
                    }
                }

                let cornloltext = document.getElementById("cornlolText")

                cornloltext.onclick = function () {
                    pepeIcon.style.transform = "rotate(" + rotation + "deg)"
                    rotation += 20

                    if (rotation > 360) {
                        rotation = 0
                    }
                }

                let bitmexMinField = document.getElementById("bitmexMinField")
                bitmexMinField.onchange = function () {
                    if (bitmexMinField.value < minTradeSize) {
                        bitmexMinField.value = minTradeSize
                    }
                    bitmexMinMarket = bitmexMinField.value

                    setCookie("bitmexMin", bitmexMinMarket, 300)

                }

                document.getElementById('soundtest').onclick = () => {
                    sound = true
                    console.log('sound now ' + sound)
                }

                document.getElementById("bitmexEnabledButton").onchange = function () {
                    bitmexEnabled = document.getElementById("bitmexEnabledButton").checked
                    document.getElementById("bitmexMinField").disabled = !document.getElementById("bitmexMinField").disabled
                    setCookie("bitmexEnabled", bitmexEnabled, 300)
                }

                let bitfinexMinField = document.getElementById("bitfinexMinField")
                bitfinexMinField.onchange = function () {
                    if (bitfinexMinField.value < minTradeSize) {
                        bitfinexMinField.value = minTradeSize
                    }
                    bitfinexMinMarket = bitfinexMinField.value

                    setCookie("bitfinexMin", bitfinexMinMarket, 300)
                }

                document.getElementById("bitfinexEnabledButton").onchange = function () {
                    bitfinexEnabled = document.getElementById("bitfinexEnabledButton").checked
                    document.getElementById("bitfinexMinField").disabled = !document.getElementById("bitfinexMinField").disabled
                    setCookie("bitfinexEnabled", bitfinexEnabled, 300)
                }

                let coinbaseMinField = document.getElementById("coinbaseMinField")
                coinbaseMinField.onchange = function () {
                    if (coinbaseMinField.value < minTradeSize) {
                        coinbaseMinField.value = minTradeSize
                    }
                    coinbaseMinMarket = coinbaseMinField.value

                    setCookie("coinbaseMin", coinbaseMinMarket, 300)

                }
                document.getElementById("coinbaseEnabledButton").onchange = function () {
                    coinbaseEnabled = document.getElementById("coinbaseEnabledButton").checked
                    document.getElementById("coinbaseMinField").disabled = !document.getElementById("coinbaseMinField").disabled
                    setCookie("coinbaseEnabled", coinbaseEnabled, 300)
                }

                let binanceMinField = document.getElementById("binanceMinField")
                binanceMinField.onchange = function () {
                    if (binanceMinField.value < minTradeSize) {
                        binanceMinField.value = minTradeSize
                    }
                    binanceMinMarket = binanceMinField.value

                    setCookie("binanceMin", binanceMinMarket, 300)
                }
                document.getElementById("binanceEnabledButton").onchange = function () {
                    console.log("binanceEnabledButton onchange- ")
                    binanceEnabled = document.getElementById("binanceEnabledButton").checked
                    document.getElementById("binanceMinField").disabled = !document.getElementById("binanceMinField").disabled
                    setCookie("binanceEnabled", binanceEnabled, 300)

                    console.log("set binanceEnabled: " + binanceEnabled)
                }


                let bitstampMinField = document.getElementById("bitstampMinField")
                bitstampMinField.onchange = function () {
                    if (bitstampMinField.value < minTradeSize) {
                        bitstampMinField.value = minTradeSize
                    }
                    bitstampMinMarket = bitstampMinField.value

                    console.log("setstampmin cookie to min " + bitstampMinMarket)

                    setCookie("bitstampMin", bitstampMinMarket, 300)
                }
                document.getElementById("bitstampEnabledButton").onchange = function () {
                    console.log("bitstampEnabledButton onchange- ")
                    bitstampEnabled = document.getElementById("bitstampEnabledButton").checked
                    document.getElementById("bitstampMinField").disabled = !document.getElementById("bitstampMinField").disabled
                    setCookie("bitstampEnabled", bitstampEnabled, 300)

                    console.log("set bitstampEnabled: " + bitstampEnabled)
                }

                let bybitMinField = document.getElementById("bybitMinField")
                bybitMinField.onchange = function () {
                    if (bybitMinField.value < minTradeSize) {
                        bybitMinField.value = minTradeSize
                    }
                    bybitMinMarket = bybitMinField.value

                    console.log("setbybitpmin cookie to min " + bybitMinMarket)

                    setCookie("bybitMin", bybitMinMarket, 300)
                }
                document.getElementById("bybitEnabledButton").onchange = function () {
                    console.log("bybitEnabledButton onchange- ")
                    bybitEnabled = document.getElementById("bybitEnabledButton").checked
                    document.getElementById("bybitMinField").disabled = !document.getElementById("bybitMinField").disabled
                    setCookie("bybitEnabled", bybitEnabled, 300)

                    console.log("set bybitEnabled: " + bybitEnabled)
                }



                let deribitMinField = document.getElementById("deribitMinField")
                deribitMinField.onchange = function () {
                    if (deribitMinField.value < minTradeSize) {
                        deribitMinField.value = minTradeSize
                    }
                    deribitMinMarket = deribitMinField.value

                    console.log("setderpmin cookie to min " + deribitMinMarket)

                    setCookie("deribitMin", deribitMinMarket, 300)
                }
                document.getElementById("deribitEnabledButton").onchange = function () {
                    console.log("deribitEnabledButton onchange- ")
                    deribitEnabled = document.getElementById("deribitEnabledButton").checked
                    document.getElementById("deribitMinField").disabled = !document.getElementById("deribitMinField").disabled
                    setCookie("deribitEnabled", deribitEnabled, 300)

                    console.log("set deribitEnabled: " + deribitEnabled)
                }





                document.getElementById("soundEnabledButton").onchange = function () {
                    console.log("soundEnabledButton onchange- ")
                    sound = document.getElementById("soundEnabledButton").checked

                    setCookie("sound", sound, 300)

                    console.log("set sound: " + sound)
                }



                let settingslink = document.getElementById("settingslink")
                settingslink.onclick = function () {
                    let modal = document.getElementById('myModal')
                    let span = document.getElementsByClassName("close")[0]
                    modal.style.display = "block"
                    span.onclick = function () {
                        modal.style.display = "none"
                    }
                    window.onclick = function (event) {
                        if (event.target === modal) {
                            modal.style.display = "none"
                        }
                    }
                }

                let clearlink = document.getElementById("clearlink")
                clearlink.onclick = function () {
                    trades = []
                }

                let liqclearlink = document.getElementById("liqclearlink")
                liqclearlink.onclick = function () {
                    liquidations = []
                }

                let liqhidelink = document.getElementById("liqhidelink")
                liqhidelink.onclick = function () {
                    document.getElementById("liqMainDiv").style.display = "none"
                    document.getElementById("liqEnabledButton").checked = false
                }

                let markethidelink = document.getElementById("markethidelink")
                markethidelink.onclick = function () {
                    document.getElementById("tableandbottom").style.display = "none"
                    document.getElementById("marketsEnabledButton").checked = false
                }

                let footer = document.getElementById("footer")

                footer.onclick = function () {
                    let modal = document.getElementById('myModal')
                    let span = document.getElementsByClassName("close")[0]
                    modal.style.display = "block"
                    span.onclick = function () {
                        modal.style.display = "none"
                    }
                    window.onclick = function (event) {
                        if (event.target === modal) {
                            modal.style.display = "none"
                        }
                    }
                }


                let savesettingsbutton = document.getElementById("savesettingsbutton")

                savesettingsbutton.onclick = function () {

                    // setCookie("bitmexMin", document.getElementById('bitmexMinField').value, 300)
                    // setCookie("bitfinexMin", document.getElementById('bitfinexMinField').value, 300)
                    // setCookie("coinbaseMin", document.getElementById('coinbaseMinField').value, 300)
                    // setCookie("binanceMin", document.getElementById('binanceMinField').value, 300)
                    //
                    // setCookie("bitmexEnabled", document.getElementById('bitmexEnabledButton').checked, 300)
                    // setCookie("bitfinexEnabled", document.getElementById('bitfinexEnabledButton').checked, 300)
                    // setCookie("coinbaseEnabled", document.getElementById('coinbaseEnabledButton').checked, 300)
                    // setCookie("binanceEnabled", document.getElementById('binanceEnabledButton').checked, 300)
                    //
                    // setCookie("liqEnabled", document.getElementById('liqEnabledButton').checked, 300)
                    // setCookie("bitmexLiqEnabled", document.getElementById('bitmexLiqEnabledButton').checked, 300)
                    //
                    // setCookie("bitmexLiqMin", document.getElementById('bitmexLiqMinField').value, 300)

                    setCookie("marketH", $("#maintablediv").height(), 300)
                    setCookie("marketW", $("#maintablediv").width(), 300)

                    setCookie("liqH", $("#liqdiv").height(), 300)
                    setCookie("liqW", $("#liqdiv").width(), 300)


                    window.alert("saved dimensions: \n market orders: height." + $("#maintablediv").height().toFixed(0) + " width." + $("#maintablediv").width().toFixed(0)
                        + "\n liquidations: height." + $("#liqdiv").height().toFixed(0) + " width." + $("#liqdiv").width().toFixed(0))


                }


                if (getCookie("bitmexMin") === undefined) {
                    setCookie("bitmexLiqEnabled", bitmexLiqEnabled, 300)

                    setCookie("bitmexLiqMin", bitmexMinLiq, 300)

                    setCookie("bitmexMin", bitmexMinMarket, 300)
                    setCookie("bitfinexMin", bitfinexMinMarket, 300)
                    setCookie("coinbaseMin", coinbaseMinMarket, 300)
                    setCookie("binanceMin", binanceMinMarket, 300)
                    setCookie("bitstampMin", bitstampMinMarket, 300)
                    setCookie("bybitMin", bybitMinMarket, 300)
                    setCookie("deribitMin", deribitMinMarket, 300)

                    setCookie("bitmexEnabled", bitmexEnabled, 300)
                    setCookie("bitfinexEnabled", bitfinexEnabled, 300)
                    setCookie("coinbaseEnabled", coinbaseEnabled, 300)
                    setCookie("binanceEnabled", binanceEnabled, 300)
                    setCookie("bitstampEnabled", bitstampEnabled, 300)
                    setCookie("bybitEnabled", bybitEnabled, 300)
                    setCookie("deribitEnabled", deribitEnabled, 300)

                    setCookie("sound", sound, 300)
                    setCookie("hoverable", hoverable, 300)

                    setCookie("marketH", 600, 300)
                    setCookie("marketW", 300, 300)
                    setCookie("liqH", 150, 300)
                    setCookie("liqW", 300, 300)
                }

                // console.log("mexmin cookie: " + getCookie("bitmexMin"))
                // console.log("stampmin cookie: " + getCookie("bitstampMin"))

                if (getCookie("bitstampMin") === undefined) {
                    setCookie("bitstampMin", bitstampMinMarket, 300)
                    setCookie("bitstampEnabled", bitstampEnabled, 300)
                }

                if (getCookie("bybitMin") === undefined) {
                    setCookie("bybitMin", bybitMinMarket, 300)
                    setCookie("bybitEnabled", bybitEnabled, 300)
                }

                if (getCookie("deribitMin") === undefined) {
                    setCookie("deribitMin", deribitMinMarket, 300)
                    setCookie("deribitEnabled", deribitEnabled, 300)
                }

                if (getCookie("sound")===undefined) {
                    setCookie("sound", sound)
                }

                if (getCookie("hoverable")===undefined) {
                    setCookie("hoverable", hoverable)
                }


                if (getCookie("bitmexMin") !== undefined) {

                    document.getElementById('bitmexMinField').value = getCookie("bitmexMin")
                    document.getElementById('bitfinexMinField').value = getCookie("bitfinexMin")
                    document.getElementById('coinbaseMinField').value = getCookie("coinbaseMin")
                    document.getElementById('binanceMinField').value = getCookie("binanceMin")
                    document.getElementById('bitstampMinField').value = getCookie("bitstampMin")
                    document.getElementById('bybitMinField').value = getCookie("bybitMin")
                    document.getElementById('deribitMinField').value = getCookie("deribitMin")





                    $('#bitmexMinField').prop("disabled", getCookie("bitmexEnabled") === "false")
                    $('#bitfinexMinField').prop("disabled", getCookie("bitfinexEnabled") === "false")
                    $('#coinbaseMinField').prop("disabled", getCookie("coinbaseEnabled") === "false")
                    $('#binanceMinField').prop("disabled", getCookie("binanceEnabled") === "false")
                    $('#bitstampMinField').prop("disabled", getCookie("bitstampEnabled") === "false")
                    $('#bybitMinField').prop("disabled", getCookie("bybitEnabled") === "false")
                    $('#deribitMinField').prop("disabled", getCookie("deribitEnabled") === "false")

                    $('#bitmexEnabledButton').prop("checked", getCookie("bitmexEnabled") === "true")
                    $('#bitfinexEnabledButton').prop("checked", getCookie("bitfinexEnabled") === "true")
                    $('#coinbaseEnabledButton').prop("checked", getCookie("coinbaseEnabled") === "true")
                    $('#binanceEnabledButton').prop("checked", getCookie("binanceEnabled") === "true")
                    $('#bitstampEnabledButton').prop("checked", getCookie("bitstampEnabled") === "true")
                    $('#bybitEnabledButton').prop("checked", getCookie("bybitEnabled") === "true")
                    $('#deribitEnabledButton').prop("checked", getCookie("deribitEnabled") === "true")

                    // $('#soundEnabledButton').prop("checked", getCookie("sound") === "true" || getCookie("sound")===true)



                    document.getElementById('soundEnabledButton').disabled = true


                    $('#hoverEnabledButton').prop("checked", getCookie("hoverable") === "true" || getCookie("sound")===true)


                    document.getElementById("bitmexLiqMinField").value = getCookie("bitmexLiqMin")
                    $("#bitmexLiqMinField").prop("disabled", getCookie("bitmexLiqEnabled") === "false")

                    // document.getElementById("liqEnabledButton").checked = getCookie("liqEnabled")
                    $("#bitmexLiqEnabledButton").prop("checked", getCookie("bitmexLiqEnabled") === "true")

                    // console.log("bitmexliiqenabled: " + getCookie("bitmexLiqEnabled"))


                    bitmexMinMarket = getCookie("bitmexMin")
                    bitfinexMinMarket = getCookie("bitfinexMin")
                    coinbaseMinMarket = getCookie("coinbaseMin")
                    binanceMinMarket = getCookie("binanceMin")
                    bitstampMinMarket = getCookie("bitstampMin")
                    bybitMinMarket = getCookie("bybitMin")
                    deribitMinMarket = getCookie("deribitMin")


                    // console.log("bitstamp min cookie: " + getCookie("bitstampMin"))

                    bitmexMinLiq = getCookie("bitmexLiqMin")


                    bitmexEnabled = getCookie("bitmexEnabled")
                    bitfinexEnabled = getCookie("bitfinexEnabled")
                    coinbaseEnabled = getCookie("coinbaseEnabled")

                    binanceEnabled = getCookie("binanceEnabled")
                    console.log("binanceenabled: " + binanceEnabled)
                    bitstampEnabled = getCookie("bitstampEnabled")
                    bybitEnabled = getCookie("bybitEnabled")
                    deribitEnabled = getCookie("deribitEnabled")

                    sound = getCookie("sound")

                    hoverable = getCookie("hoverable")
                    console.log("got hov, " + hoverable)
                    document.getElementById("tableandbottom").style.pointerEvents = hoverable===true||hoverable==='true' ? "all" : "none"
                    document.getElementById("liqMainDiv").style.pointerEvents = hoverable===true||hoverable==='true' ? "all" : "none"

                    bitmexLiqEnabled = getCookie("bitmexLiqEnabled")

                    $("#maintablediv").height(getCookie("marketH"))
                    $("#maintablediv").width(getCookie("marketW"))

                    $("#liqdiv").height(getCookie("liqH"))
                    $("#liqdiv").width(getCookie("liqW"))


                } else {
                    document.getElementById('bitmexMinField').value = bitmexMinMarket
                    document.getElementById('bitfinexMinField').value = bitfinexMinMarket
                    document.getElementById('coinbaseMinField').value = coinbaseMinMarket
                    document.getElementById('binanceMinField').value = binanceMinMarket
                    document.getElementById('bitstampMinField').value = bitstampMinMarket
                    document.getElementById('bybitMinField').value = bybitMinMarket
                    document.getElementById('deribitMinField').value = deribitMinMarket

                    document.getElementById('bitmexEnabledButton').checked = bitmexEnabled
                    document.getElementById('bitfinexEnabledButton').checked = bitfinexEnabled
                    document.getElementById('coinbaseEnabledButton').checked = coinbaseEnabled
                    document.getElementById('binanceEnabledButton').checked = binanceEnabled
                    document.getElementById('bitstampEnabledButton').checked = bitstampEnabled
                    document.getElementById('bybitEnabledButton').checked = bybitEnabled
                    document.getElementById('deribitEnabledButton').checked = deribitEnabled

                    // document.getElementById('soundEnabledButton').checked = sound||sound==='true'

                    document.getElementById('soundEnabledButton').disabled = true

                    document.getElementById('hoverEnabledButton').checked = hoverable||hoverable==='true'

                }


            }
        }

        scrollUpLoop() {
            setInterval(function () {
                document.getElementById("maintablediv").scrollTo({
                    'behavior': 'smooth',
                    'left': 0,
                    'top': 0
                })
            }, 10000)
        }


        setTitleLoop() {
            document.title = currentPrice
        }
    }

    function getKformat(size, iteration) {
        if (size >= 1) {
            if (size < 1000) {
                return lowFormat(size)
            }
            let c = ["k", "m"]
            let d = (size / 100) / 10.0
            let isRound = (d * 10) % 10 === 0


            let s = (d < 1000 ?
                ((d > 99.9 || isRound || (!isRound && d > 9.99) ?
                        d.toFixed(0) * 10 / 10 : d.toFixed(1) + ""
                ) + "" + c[iteration]) : getKformat(d, iteration + 1))
            s = s.replace(".0m", "m")
            s = s.replace("000k", "m")
            s = s.replace(".0k", "k")
            return s
        } else {
            return 0
        }
    }

    function lowFormat(size) {
        return Math.abs(Math.round(size)).toFixed(0)
    }

    class LiquidationRow extends React.Component {
        render() {

            const {data} = this.props

            const row = data.map((data, i) =>
                <tr className={"traderow " + ((data.exchangeName === "coinbase" || data.exchangeName === "binance" || data.exchangeName === "bitstamp") ? "bitfinex" : 'bitmex') + " " + Row.getSizeGroup(data.exchangeName, (data.highestAmount > 0 ? data.highestAmount : data.size)) + " " + (Math.abs(data.highestAmount) <= Row.getMinLiqForExchange(data) ? "hide" : "")}
                    key={i} bgcolor={Row.getBgColor(data)}>
                    <td id="tradeIcon">{Row.getIcon(data)}</td>
                    <td id="tradeSize">{this.getTradeSizeLiq(data)}</td>
                    <td width="100%" id="spacer">{""}</td>
                    <td id="tradePrice">{this.getTradePriceLiq(data)}</td>
                    <td id="liqTimeElapsed">{Row.getTimeElapsed(data)}</td>
                </tr>
            )

            return (<tbody id="tbodyy">{row}</tbody>)
        }

        getTradePriceLiq(data) {
            if (data.symbol !== "message") {
                let slip = data.price - data.firstPrice
                return ("@ " + data.price)
            } else {
                return ""
            }
        }

        getTradeSizeLiq(data) {
            if (data.symbol !== "message") {
                return getKformat(data.highestAmount, 0) + (" liq ") + ((data.size === 0) ? (((parseInt((Date.now() - data.startTime) / 1000) < 60) ? "(filled!)" : "")) : ("(" + getKformat(data.size, 0) + " active)"))
            } else {
                return data.message
            }
        }

        getLiqStartSize(data) {
            if (data.startSize !== data.highestAmount) {
                return "starting size: " + data.startSize
            } else {
                return ""
            }
        }
    }

    class Row extends React.Component {

        render() {
            const {data} = this.props

            const row = data.map((data, i) =>
                <tr className={"traderow " + ((data.exchangeName === "coinbase" || data.exchangeName === "binance" || data.exchangeName === "bitstamp") ? "bitfinex" : data.exchangeName==='message'?'message':'bitmex') + " " + Row.getSizeGroup(data.exchangeName, data.size) + " " + (Math.abs(data.size) < Row.getMinMarketForExchange(data) ? "hide" :

                    (data.hide || (data.size > 5000000 && data.btcAmt < 20)) ? "hide" : "")} //try to fix gdaxbug

                    key={i} bgcolor={Row.getBgColor(data)}>
                    <td id="tradeIcon">{Row.getIcon(data)}</td>
                    <td id="tradeSize">{(data.symbol === "message" ? data.message : getKformat(Math.abs(parseFloat(data.size)), 0))}</td>
                    <td width="100%" id="spacer">{""}</td>
                    <td id="slip">{Row.getSlipIcon(data)}{Row.getSlip(data)}</td>
                    <td id="btcAmt">{Row.getBtcShow(data)}</td>
                    <td id="atSign">{(Row.getBtcShow(data) === null ? "" : "@ ")}</td>
                    <td id="tradePrice">{data.exchangeName === "message" ? "" : parseFloat(data.lastPrice).toFixed(1)}</td>
                    <td id="elapsedTime" width="100%">{Row.getTimeElapsed(data)}</td>
                </tr>
            )
            return (<tbody id="tbodyy">{row}</tbody>)
        }


        static getTimeElapsed(data) {
            if (data.exchangeName !== "message") {
                var timeElapsed = parseInt((Date.now() - data.startTime) / 1000)
                if (timeElapsed < 10) {
                    return "now"
                } else if (timeElapsed < 60) {
                    return "<1m"
                } else {
                    return parseInt(timeElapsed / 60) + "m"
                }
            } else {
                return ""
            }

        }

        static getBtcShow(data) {
            if (Math.abs(data.btcAmt) >= 1 && (data.exchangeName === "bitfinex" || data.exchangeName === "coinbase" || data.exchangeName === "binance" || data.exchangeName === "bitstamp")) {
                var abs = Math.abs(data.btcAmt)
                return " " + abs > 9 ? (abs.toFixed(0) + " btc") : (abs.toFixed(1).toString().replace('.0', '') + " btc")
            } else {
                return null
            }
        }

        static getSlip(data) {
            if (data.exchangeName !== "binance") {
                var slip = data.lastPrice - data.firstPrice


                if (Math.abs(slip) >= 0.5) {
                    return (Math.abs(slip).toFixed(1))
                } else {
                    return null
                }
            }
        }

        static getSlipIcon(data) {
            if (data.exchangeName !== "binance") {
                var slip = data.lastPrice - data.firstPrice
                if (Math.abs(slip) >= 0.5) {
                    if (slip > 0) {
                        return "â "
                        // return <span className="slipIcon"><img src="img/down2.png" alt="up"/></span>
                    } else {
                        return "â "
                        // return <span className="slipIcon"><img src="img/down2.png" alt="down"/></span>
                    }
                } else {
                    return null
                }
            }
        }

        static getMinMarketForExchange(data) {
            if (data.exchangeName === "bitmex") {
                return bitmexMinMarket
            } else if (data.exchangeName === "bitfinex") {
                return bitfinexMinMarket
            } else if (data.exchangeName === "coinbase") {
                return coinbaseMinMarket
            } else if (data.exchangeName === "binance") {
                return binanceMinMarket
            } else if (data.exchangeName === "bitstamp") {
                return bitstampMinMarket
            } else if (data.exchangeName === "bybit") {
                return bybitMinMarket
            } else if (data.exchangeName === "deribit") {
                return deribitMinMarket
            } else {
                return 0
            }
        }

        static getMinLiqForExchange(data) {
            if (data.exchangeName === "bitmex") {
                return bitmexMinLiq
            } else {
                return 0
            }
        }

        static getSizeGroup(exchangeName, size) {
            if (exchangeName === "bitmex" || exchangeName === 'bybit' || exchangeName === 'deribit') {
                if (size >= bitmexSize6) {
                    return "size6"
                } else if (size >= bitmexSize5) {
                    return "size5"
                } else if (size >= bitmexSize4) {
                    return "size4"
                } else if (size >= bitmexSize3) {
                    return "size3"
                } else if (size >= bitmexSize2) {
                    return "size2"
                } else {
                    return "size1"
                }
            } else if (exchangeName === "bitfinex" || exchangeName === "coinbase" || exchangeName === "binance" || exchangeName === "bitstamp") {
                if (Math.abs(size) >= bitfinexSize6) {
                    return "size6"
                } else if (Math.abs(size) >= bitfinexSize5) {
                    return "size5"
                } else if (Math.abs(size) >= bitfinexSize4) {
                    return "size4"
                } else if (Math.abs(size) >= bitfinexSize3) {
                    return "size3"
                } else if (Math.abs(size) >= bitfinexSize2) {
                    return "size2"
                } else {
                    return "size1"
                }
            } else if (exchangeName === "message") {
                return "message"
            }
        }

        static getIcon(data) {

            if (data.exchangeName === "bitmex" && !data.liq) {
                return <span><img src="img/bitmexnew1.png" alt="bitmex" height="20" width="22" /></span>
            } else if (data.exchangeName === "bitfinex") {
                return <span><img src="img/bitfinex22.png" alt="finex" height="20" width="22"/></span>
            } else if (data.exchangeName === "coinbase") {
                return <span><img src="img/gdax25.png" alt="gdax"/></span>
            } else if (data.exchangeName === "binance") {
                return <span><img src="img/binancenew1.png" height="20" width="22" alt="safu"/></span>
            } else if (data.exchangeName === "bitstamp") {
                return <span><img src="img/stampnew1.png" height="20" width="22" alt="stamp"/></span>
            } else if (data.exchangeName === "bybit") {

                return <span><img id="bybitimg" src="img/bybitnew1.png" height="20" width="22" alt="bybit"/></span>

            } else if (data.exchangeName === "deribit") {

                return <span><img id="deribitimg" src="img/deribit2.png" height="20" width="20" alt="deribit"/></span>


            } else if (data.exchangeName === "message") {
                if (data.type === "liquidation") {
                    return <span><img src="img/bitmex22new.png" alt="bitmex"/></span>
                    // return <span><img src="img/arthursmall.png" height="20px" width="20px" alt="text"/></span>
                } else {
                    return <span><img src="img/cornicon.png" alt="corn" id="corn" height="15px" width="15px"/></span>
                    // return <span className="rowIcon"><img src="img/pepp2good.png" height="20px" width="20px" alt="text"/></span>
                }
            } else if (data.liq) {
                if (!data.deleted) {
                    return <span><img src="img/arthursmall.png" alt="liq" id="arthuriconspin" height="20px"
                                      width="20px"/></span>
                } else if (data.deleted && (parseInt((Date.now() - data.endTime) / 1000) < 10)) {
                    return <span><img src="img/arthursmall.png" alt="liq" id="arthuricon" height="20px"
                                      width="20px"/></span>
                } else {
                    return <span><img src="img/bitmex22new.png" alt="bitmex"/></span>
                }
            }
        }

        static getBgColor(data) {
            var side = data.side
            var size = Math.abs(data.highestAmount > 0 ? data.highestAmount : data.size)

            var intensity = Math.abs(size) / 4200

            if (intensity > 165) {
                intensity = 165
            } else if (intensity < 1) {
                intensity = 1
            }

            if (side) {
                return rgb2hex(170 - intensity, 255 - intensity / 2, 170 - intensity)
            } else {
                return rgb2hex(255 - intensity / 2, 170 - intensity, 170 - intensity)
            }

            function rgb2hex(red, green, blue) {
                var rgb = blue | (green << 8) | (red << 16)
                return '#' + (0x1000000 + rgb).toString(16).slice(1)
            }
        }
    }

    class Table extends React.Component {
        constructor(props) {
            super(props)
        }

        render() {
            return (<table className="table1"><Row data={this.props.data}/></table>)
        }
    }

    class LiqTable extends React.Component {
        constructor(props) {
            super(props)
        }

        render() {
            return (<table className="table2"><LiquidationRow data={this.props.data}/></table>)
        }
    }

    class Footer extends React.Component {
        constructor(props) {
            super(props)
        }

        render() {
            return (
                <div>
                    <div id="footerdiv">
                        <div id="footerleft">
                            <img src="img/cornicon.png" height="22px" width="22px" alt=" " id="pepeIcon"/>
                            <b><span id="cornlolText"></span></b>
                            <span id="settingsFooterRightLink" className="footerRightText">settings</span>
                        </div>
                        <div id="footerright">
                            <a href="https://github.com/boppleton/corn.lol" target="_blank"><span
                                className="footerRightText">github</span></a>
                        </div>
                    </div>

                    <div id="myModal" className="modal">

                        <div className="modal-content">
                            <div className="modal-header">
                                <span className="close">&times;</span>
                                <div display="flex">
                                    <h2>settings</h2>
                                </div>

                            </div>

                            <div className="modal-body">

                                <div className="mainSettingsDiv">



                                    <div id="marketSettings">



                                        <div className="settingsitem header">
                                            <input id="marketsEnabledButton" type="checkbox"
                                                   name="marketsEnabledButton" className="checkboxx"/>
                                            <h2>market orders</h2>
                                        </div>

                                        <div className="settingsitem">

                                            <input id="bitmexEnabledButton" type="checkbox"
                                                   name="bitmexEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/bitmexnew1.png" height="20" width="22" /><b>bitmex</b>
                                            <input id="bitmexMinField" type="number" name="bitmexMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>
                                        </div>

                                        <div className="settingsitem">
                                            <input id="bitfinexEnabledButton" type="checkbox"
                                                   name="bitfinexEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/finexnew1.png" height="20" width="22" /> <b>bitfinex</b>
                                            <input id="bitfinexMinField" type="number" name="bitfinexMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>

                                        </div>

                                        <div className="settingsitem">
                                            <input id="coinbaseEnabledButton" type="checkbox"
                                                   name="coinbaseEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/gdax25.png" height="20" width="22" /><b>coinbase</b>
                                            <input id="coinbaseMinField" type="number" name="coinbaseMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>

                                        </div>

                                        <div className="settingsitem">
                                            <input id="binanceEnabledButton" type="checkbox"
                                                   name="binanceEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/binancenew1.png" height="20" width="22" /><b>binance</b>
                                            <input id="binanceMinField" type="number" name="binanceMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>

                                        </div>

                                        <div className="settingsitem">
                                            <input id="bitstampEnabledButton" type="checkbox"
                                                   name="bitstampEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/stampnew1.png" height="20" width="22" /><b>bitstamp</b>
                                            <input id="bitstampMinField" type="number" name="bitstampMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>

                                        </div>

                                        <div className="settingsitem">
                                            <input id="bybitEnabledButton" type="checkbox"
                                                   name="bybitEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/bybitnew1.png" height="20" width="22" /><b>bybit</b>
                                            <input id="bybitMinField" type="number" name="bybitMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>

                                        </div>

                                        <div className="settingsitem">
                                            <input id="deribitEnabledButton" type="checkbox"
                                                   name="deribitEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/deribit2.png" height="20" width="22" /><b>deribit</b>
                                            <input id="deribitMinField" type="number" name="deribitMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>

                                        </div>

                                    </div>

                                    <div id="liqSettings">
                                        <div className="settingsitem header">
                                            <input id="liqEnabledButton" type="checkbox"
                                                   name="liqEnabledButton" className="checkboxx"/>
                                            <h2>liquidations</h2>
                                        </div>

                                        <div className="settingsitem">

                                            <input id="bitmexLiqEnabledButton" type="checkbox"
                                                   name="bitmexLiqEnabledButton" className="checkboxx"/>
                                            <img id="settingsIcons" src="img/bitmexnew1.png" height="20" width="22" /><b>bitmex</b>
                                            <input id="bitmexLiqMinField" type="number" name="bitmexLiqMinField"
                                                   className="minAmount" min="0" max="10000000" step="1000"/>
                                        </div>
                                    </div>

                                    <div id="otherSettings">
                                        <div className="settingsitem">
                                            <input id="hoverEnabledButton" type="checkbox"
                                                   name="hoverEnabledButton" className="checkboxx"/>
                                            <b>show scroll/resize</b>
                                        </div>
                                    </div>

                                    <div id="otherSettings">
                                        <div className="settingstem">
                                            <input id="soundEnabledButton" type="checkbox"
                                                   name="hoverEnabledButton" className="checkboxx"/>
                                            <b>sound <span id="newww">(testi<span id="soundtest">n</span>g)</span></b>

                                        </div>
                                    </div>

                                    <div id="savesettings">
                                        <span id="savesettingsbutton">save window sizes</span>
                                    </div>

                                    <div id="donate">
                                        <span id="donateText">corn.lol/eth</span>
                                    </div>

                                    <div>
                                        <span id="donateTitle">donate BTC:</span>
                                    </div>

                                    <div id="donate2">
                                        <span id="donateText2">14mzYBZZyMQGP7ksCS2YPSpnV6uMNgfKtU</span>
                                    </div>

                                </div>
                            </div>

                            <div className="modal-footer">
                                <hr/>
                            </div>
                        </div>
                    </div>
                </div>
            )
        }
    }

    class Chart extends React.Component {
        constructor(props) {
            super(props)
        }

        render() {
            return (

                <div className="tradingview-widget-container">
                    <div id="tradingview_1a86e"></div>
                    <div className="tradingview-widget-copyright"><a
                        href="https://www.tradingview.com/symbols/BITMEX-XBTUSD/" rel="noopener" target="_blank"><span
                        className="blue-text">XBTUSD chart</span></a> by TradingView
                    </div>
                </div>


            )
        }
    }

    ReactDOM.render(<Start/>, document.getElementById('rootydiv'))

    ReactDOM.render(<Chart/>, document.getElementById('rightside'))

    ReactDOM.render(<Footer/>, document.getElementById('footer'))

</script>

<style>


    #bybitimg {
        /*border-radius: 8px;*/
        /*background-color: rgb(57, 57, 57);*/
    }

    * {
        margin: 0;
        padding: 0;
    }

    body, html {

        width: 100%;
        height: 100%;

        overflow: hidden;

        background: radial-gradient(black 15%, transparent 16%) 0 0,
        radial-gradient(black 15%, transparent 16%) 8px 8px,
        radial-gradient(rgba(255, 255, 255, .1) 15%, transparent 20%) 0 1px,
        radial-gradient(rgba(255, 255, 255, .1) 15%, transparent 20%) 8px 9px;
        background-color: #282828;
        background-size: 16px 16px;
    }

    #root {
        width: 100%;
        height: 100%;
    }

    #bbb {
        display: flex;
        height: 100%;
        width: 100%;
    }

    #rightside {
        width: 100%;
        height: 95%;
        margin: 5px;
        /*border: 3px solid #585858;*/
        margin-bottom: 30px;
    }

    .tradingview-widget-container {
        width: 100%;
        height: 100%;
    }

    #tradingview_1a86e {
        height: 100%;
        width: 100%;
    }

    #donate {
        padding: 2px;
        color: #ff93a0;
        text-align: center;
        font-size: 16px;


        font-weight: bold;

        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none;
    }

    #donate:hover {
        color: deepskyblue;
    }

    #donateTitle {
        opacity: 0.5;
        color: #ffffff
    }

    #donateTitle:hover {
        opacity: 0.8;
    }


    #donate2 {
        padding: 2px;
        color: #5cb85c;
        text-align: center;
        font-size: 14px;


        font-weight: bold;

        /*-webkit-touch-callout: none; !* iOS Safari *!*/
        /*-webkit-user-select: none; !* Safari *!*/
        /*-khtml-user-select: none; !* Konqueror HTML *!*/
        /*-moz-user-select: none; !* Firefox *!*/
        /*-ms-user-select: none; !* Internet Explorer/Edge *!*/
        /*user-select: none;*/
    }

    #donate2:hover {
        color: deepskyblue;
    }

    #savesettings {

        font-weight: bold;


        padding: 2px;
        color: #5cb85c;
        text-align: center;
        font-size: 16px;

        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none;
    }

    #savesettings:hover {
        color: deepskyblue;
    }


    #icon img {
        /*width: 100%;*/
    }


    a {
        color: #858585;
    }

    #pepeIcon:hover {
        /*height: 20px;*/
        /*width: 20px;*/
    }

    #footer {
        font-family: 'Raleway', sans-serif;

        position: fixed;
        left: 0;
        bottom: 0;
        width: 100%;
        background-color: #4f4f4f;
        color: #858585;
        text-align: left;


    }

    #footerdiv {
        padding: 5px;
    }

    #footerdiv b {
        /*font-size: 18px;*/
        /*padding-right: 5px;*/
        /*color: #9c9c9c;*/
        /*-webkit-text-stroke: 1px black;*/
    }

    #footerleft {
        float: left;
        text-align: left;

    }

    #footerleft {
        text-align: center;
    }

    #footerright {
        /*text-align: right;*/
    }


    .settingsitem {
        display: flex;
        padding: 5px;
    }


    #rootydiv {
        height: 100%;
        width: max-content;

    }

    #maintablediv {

        position: relative;

        float: top;

        border: 3px solid #585858;

        margin: 5px;
        /*padding: 2px;*/
        width: 283px;
        height: 500px;
    }

    #liqdiv {

        /*overflow-y: scroll;*/
        /*resize: both;*/

        position: relative;

        float: bottom;

        border: 3px solid #585858;

        margin: 5px;
        /*padding: 2px;*/
        width: 283px;
        height: 150px;
    }

    #settingsFooterRightLink {
        font-weight: bold;
        font-size: 20px;
        color: rgba(50, 205, 50, 0.86);

        vertical-align: top;

        padding: 0;


    }

    #settingsFooterRightLink:hover {
        color: rgba(50, 181, 65, 0.71);

    }

    #ghostpane {
        background: #999;
        opacity: 0.2;

        width: 45%;
        height: 45%;
        top: 20%;
        left: 20%;

        position: absolute;
        margin: 0;
        padding: 0;
        z-index: 98;

        -webkit-transition: all 0.25s ease-in-out;
        -moz-transition: all 0.25s ease-in-out;
        -ms-transition: all 0.25s ease-in-out;
        -o-transition: all 0.25s ease-in-out;
        transition: all 0.25s ease-in-out;
    }


    .minAmount {

        margin-left: auto;

        height: 22px;
        width: 100px;
        background-color: #404040;
        color: white;
        font-size: 20px;

    }


    .checkboxx {
        width: 22px;
        height: 22px;


        text-align: center;
        vertical-align: middle;
    }


    .minAmount:disabled {
        background-color: #151515;
        color: #5b5b5b;
    }


    #maintablediv {
        overflow-y: hidden;
        overflow-x: hidden;

        -webkit-user-select: none; /* Safari */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
        user-select: none; /* Standard */

        height: 600px;

    }

    #maintablediv:hover {

        overflow-y: scroll;

        resize: both;


    }

    #hiddendiv {
        display: none;
        /*float: left;*/
    }

    #hiddendivLiq {
        display: none;
        /*float: left;*/
    }

    #tableandbottom {
        display: flex;
        position: relative;
        /*z-index: 99;*/
    }

    #liqMainDiv {
        display: flex;
        position: relative;
        resize: none;
        overflow: hidden;

        top: -5px;

        width: max-content;


    }

    #liqdiv {
        overflow: hidden;
        height: 140px;
    }

    #liqdiv:hover {
        overflow-y: scroll;
        resize: both;
    }

    #hiddendiv img {
        padding: 5px 10px 5px 5px;
        /*float: left;*/
    }

    #hiddendivLiq img {
        padding: 5px 10px 5px 5px;
    }

    #tableandbottom {

        width: max-content;

    }

    #tableandbottom:hover > #hiddendiv {

        /*display: inline-block;*/

        /*!*float: left;*!*/

        /*!*width: fit-content;*!*/
        /*!*height: fit-content;*!*/

        /*width: 80px;*/
        /*height: 238px;*/

        /*padding-top: 10px;*/
        /*padding-bottom: 10px;*/


        /*background-color: rgba(1, 1, 1, 0.85);*/

        /*position: relative;*/
        /*top: 10px;*/
        /*left: 2px;*/

        /*text-align: center;*/

        /*color: white;*/
    }

    #liqMainDiv:hover > #hiddendivLiq {
        /*display: inline-block;*/

        /*!*float: left;*!*/

        /*!*width: fit-content;*!*/
        /*!*height: fit-content;*!*/

        /*width: 80px;*/
        /*height: 238px;*/

        /*padding-top: 10px;*/
        /*padding-bottom: 10px;*/


        /*background-color: rgba(1, 1, 1, 0.85);*/

        /*position: relative;*/
        /*top: 10px;*/
        /*left: 2px;*/

        /*text-align: center;*/

        /*color: white;*/
    }

    .tradingview-widget-copyright {
        display: none;
    }

    #settingsButtonText {


        padding-right: 5px;

        font-family: 'Raleway', sans-serif;

        -webkit-user-select: none; /* Safari */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
        user-select: none; /* Standard */

        color: rgba(164, 255, 60, 0.8);
        /*padding: 5px;*/
        /* Internet Explorer 10 */
        display: -ms-flexbox;
        -ms-flex-pack: center;
        -ms-flex-align: center;

        /* Firefox */
        display: -moz-box;
        -moz-box-pack: center;
        -moz-box-align: center;

        /* Safari, Opera, and Chrome */
        display: -webkit-box;
        -webkit-box-pack: center;
        -webkit-box-align: center;
    }

    #settingsIcons {
        padding-left: 5px;
    }

    .singleSettingsDiv {
        vertical-align: middle;
    }

    #arthuricon {

    }

    #arthuriconspin {
        animation: rotation 1s infinite linear;
    }


    @keyframes rotation {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(359deg);
        }
    }


    #settingslink:hover > #settingsButtonText {
        color: red;
    }


    ::-webkit-scrollbar-track {
        -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
        background-color: rgba(21, 21, 20, 0.49);
    }

    ::-webkit-scrollbar {
        /*width: 10px;*/
        /*height: 10px;*/
        background-color: rgba(0, 0, 0, 0);
    }

    ::-webkit-scrollbar-thumb {
        background-color: rgba(82, 82, 82, 0.6);
        border: 2px solid rgba(100, 100, 100, 0.7);
    }

    .table1 {
        /*border: 5px red;*/
        background-color: rgba(0, 0, 0, 0);
        /*border-collapse: */
        border-spacing: 0;
        font-size: 14px;

        width: 100%;

    }

    .table1 .traderow td {
        /*width: 100%;*/

        margin: 0px;
        padding: 0px;
        white-space: nowrap;
        /*border-left: 1px solid black;*/
        text-align: left;
        /*font-size: 14px;*/
        font-family: 'Rubik', sans-serif;

        /*border: 0;*/

    }

    .table2 {
        width: 100%;
        /*border-collapse: collapse;*/
        border-spacing: 0;
    }

    .table2 .traderow td {

        margin: 0px;
        padding: 0px;
        white-space: nowrap;
        /*border-left: 1px solid black;*/
        text-align: left;
        /*font-size: 14px;*/
        font-family: 'Rubik', sans-serif;

    }

    #pad1 {
    }

    .traderow {
        /*border-top: 1px solid black;*/
        vertical-align: middle;

    }

    #marketSettings {
        padding: 15px;
        margin: 5px;
        border: 2px solid black;


    }


    #liqSettings {
        padding: 15px;
        margin: 5px;
        border: 2px solid black;
    }

    #otherSettings {
        padding: 15px;
        margin: 5px;
        border: 2px solid black;
    }

    .traderow img {
        vertical-align: middle;
    }


    .bitmex.size1 {
        color: #5d5d5d;
        font-style: italic;
        font-size: 16px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/
    }

    .bitmex.size2 {
        color: #414141;
        font-size: 18px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/


    }

    .bitmex.size3 {
        color: black;
        font-size: 18px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/

    }

    .bitmex.size4 {
        color: black;
        font-size: 20px;
        font-weight: bold;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/
    }

    .bitmex.size5 {
        color: white;
        font-size: 20px;
        font-weight: bold;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/

    }

    .bitmex.size6 {
        color: yellow;
        border: 3px solid yellow;
        font-weight: bold;
        font-size: 24px;

    }

    .bitfinex.size1 {
        color: #5d5d5d;
        font-style: italic;
        font-size: 16px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/


    }

    .bitfinex.size2 {
        color: #414141;
        font-size: 18px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/

    }

    .bitfinex.size3 {
        color: black;

        font-size: 18px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/

    }

    .bitfinex.size4 {
        color: black;
        font-weight: bold;
        font-size: 20px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/

    }

    .bitfinex.size5 {
        color: #fcfffa;

        font-weight: bold;

        font-size: 20px;
        /*border: 1px solid rgba(0, 0, 0, 0.27);*/

    }

    .bitfinex.size6 {
        font-size: 24px;
        font-weight: bold;
        color: yellow;
        border: yellow 3px;

    }

    .message {
        background-color: rgba(0, 0, 0, 0.89);
        color: rgba(16, 255, 0, 0.98);
        font-size: 15px;
        border: 2px solid rgb(24, 255, 0);
    }

    .hide {
        display: none;
    }

    #newww {
        font-weight: bold;
        color: orangered;
    }


    #btcAmt {
        /*color: rgba(43, 43, 43, 0.83);*/
        font-size: 13px;
        padding-right: 3px;
        text-align: right;

    }

    #tradeSize {
        padding-left: 5px;
    }

    #tradeIcon {
        padding: 0px;
        padding-left: 5px;
    }

    #elapsedTime {
        font-size: 11px;
        font-style: italic;
        font-weight: normal;
        color: rgba(66, 66, 66, 0.78);
        padding-right: 5px;
    }

    #liqTimeElapsed {
        font-size: 11px;
        font-style: italic;
        font-weight: normal;
        color: rgba(66, 66, 66, 0.78);
        padding-right: 5px;
    }

    #liqStartSize {
        font-size: 14px;
        color: rgba(0, 0, 0, 0.78);
        padding-right: 5px;
        padding-left: 5px;
    }

    #tradePrice {
        font-size: 14px;
        padding-left: 3px;
        padding-right: 5px;
        font-weight: normal;
        font-style: normal;
        /*color: #5a5a5a;*/

    }

    #slip {
        vertical-align: middle;
        /*color: #59cfd9;*/
        font-size: 12px;
        font-weight: normal;

        padding-right: 9px;
        padding-left: 9px;
        line-height: 1px;

    }

    .slipIcon {
        padding-right: 4px;


    }

    .slipIcon img {
        height: 10px;
        width: 10px;
    }


    #slipdiv {

    }


    #atSign {
        font-size: 11px;
        font-style: italic;
        color: rgba(40, 40, 40, 0.76);
        /*padding-right: 2px;*/
    }

    #betaText {
        -webkit-user-select: none; /* Safari */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
        user-select: none; /* Standard */
    }

    #betaText:hover {
        color: greenyellow;
    }

    #cornlolText {
        color: rgba(158, 158, 158, 0.71);
        -webkit-user-select: none; /* Safari */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
        user-select: none; /* Standard */
    }

    #cornlolText:hover {
        color: greenyellow;
    }

    .footerRightText {

        text-decoration: none;

        padding: 5px;
        color: rgba(102, 145, 102, 0.5);
        -webkit-touch-callout: none; /* iOS Safari */
        -webkit-user-select: none; /* Safari */
        -khtml-user-select: none; /* Konqueror HTML */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
        user-select: none;
    }

    .footerRightText:hover {
        color: greenyellow;
    }

    .footerRightSplit {
        -webkit-user-select: none; /* Safari */
        -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* IE10+/Edge */
        user-select: none; /* Standard */
        color: rgba(26, 244, 45, 0.56);
        /*font-weight: bold;*/
        font-size: 14px;
    }

    .footerRightSplit:hover {
        color: rgba(31, 255, 48, 0.51);
        font-size: 14px;
    }


    /* The Modal (background) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0, 0, 0); /* Fallback color */
        background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
        -webkit-animation-name: fadeIn; /* Fade in the background */
        -webkit-animation-duration: 0.4s;
        animation-name: fadeIn;
        animation-duration: 0.4s
    }

    /* Modal Content */
    .modal-content {
        position: fixed;
        bottom: 0;
        background-color: #fefefe;
        width: fit-content;
        -webkit-animation-name: slideIn;
        -webkit-animation-duration: 0.4s;
        animation-name: slideIn;
        animation-duration: 0.4s
    }

    /* The Close Button */
    .close {
        color: white;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }

    .modal-header {
        padding: 2px 16px;
        background-color: #5cb85c;
        color: white;
    }

    .modal-body {
        padding: 10px;
        background-color: #4e4e4e;
    }

    .mainSettingsDiv {
        margin: 2px;
    }

    .mainSettingsDiv b {
        padding-left: 5px;
        padding-right: 5px;
        font-size: 18px;
        color: #b2b2b2;
    }

    .mainSettingsDiv h2 {
        padding-left: 5px;
        font-size: 28px;
        color: #cacaca;
    }

    .settingsitem.header {
        /*background-color: #3d3d3c;*/
        padding: 5px;
    }

    .mainSettingsDiv input {
        padding: 5px;
    }


    .modal-footer {
        padding: 10px;
        background-color: #418a41;
        color: white;
    }


    hr {

        margin: 10px;

        /*padding: 10px;*/

        height: 2px;
        color: rgba(97, 255, 73, 0.1);
        background-color: rgba(97, 255, 73, 0.1);
        border: 1px solid rgba(97, 255, 73, 0.1);
    }

    /* Add Animation */
    @-webkit-keyframes slideIn {
        from {
            bottom: -300px;
            opacity: 0
        }
        to {
            bottom: 0;
            opacity: 1
        }
    }

    @keyframes slideIn {
        from {
            bottom: -300px;
            opacity: 0
        }
        to {
            bottom: 0;
            opacity: 1
        }
    }

    @-webkit-keyframes fadeIn {
        from {
            opacity: 0
        }
        to {
            opacity: 1
        }
    }

    @keyframes fadeIn {
        from {
            opacity: 0
        }
        to {
            opacity: 1
        }
    }


    #initialTextDiv {
        display: flex;
        flex-direction: column;
        color: rgba(134, 210, 255, 0.7);

        padding: 10px;

        font-family: 'Rubik', sans-serif;

        background-color: #363636;

    }


</style>


</body>
</html>
